<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat App</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="tailwind.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Adjust layout for custom title bar */
        body.has-title-bar {
            padding-top: 0;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col h-screen has-title-bar">

    <!-- Custom Title Bar -->
    <div id="title-bar-container"></div>

    <div class="flex-grow overflow-hidden">
        <div id="app-container" class="flex h-full hidden">

            <!-- Server Switcher Column -->
            <div class="w-[72px] bg-midnight flex flex-col items-center py-3 gap-2">
                <div id="server-list" class="flex flex-col items-center gap-2 w-full"></div>
                <button id="create-server-btn" class="w-12 h-12 rounded-full bg-midnight-light hover:bg-violet-500 hover:rounded-2xl transition-all duration-200 flex items-center justify-center text-gray-400 hover:text-white group" title="Add a Server">
                    <i class="fas fa-plus text-xl"></i>
                </button>
            </div>

            <!-- Channels Sidebar -->
            <div class="w-60 bg-midnight-light flex flex-col">
                <div class="h-12 px-4 flex items-center justify-between border-b border-midnight shadow-sm">
                    <h2 id="server-name" class="font-bold text-white truncate">Vybez Community</h2>
                    <button id="server-settings-btn" class="text-gray-400 hover:text-white transition" title="Server Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-2">
                    <div id="channels-container"></div>
                </div>
                <button id="create-channel-btn" class="mx-2 mb-2 px-3 py-2 bg-violet-600 hover:bg-violet-700 text-white text-sm rounded flex items-center justify-center gap-2 transition" title="Create Channel">
                    <i class="fas fa-plus"></i>
                    <span>Create Channel</span>
                </button>
            </div>

            <div class="flex-1 flex flex-col">
                <div class="bg-white rounded-lg shadow flex flex-col h-full">
                    <div class="px-4 py-3 border-b flex justify-between items-center chat-header">
                        <h3 id="welcome-message" class="text-lg font-semibold"></h3>
                        <div class="flex gap-2">
                            <button id="announcements-button" class="px-3 py-1 bg-magenta-500 hover:bg-magenta-600 text-white text-sm rounded relative" title="Announcements">
                                <i class="fas fa-bullhorn"></i>
                                <span id="announcements-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                            </button>
                            <button id="notifications-button" class="px-3 py-1 bg-yellow-500 hover:bg-yellow-600 text-white text-sm rounded relative" title="Notifications">
                                <i class="fas fa-bell"></i>
                                <span id="notification-badge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                            </button>
                            <button id="support-button" class="px-3 py-1 bg-cyan-500 hover:bg-cyan-600 text-white text-sm rounded" title="Support">
                                <i class="fas fa-headset"></i>
                            </button>
                            <button id="settings-button" class="px-3 py-1 btn-brand-gradient text-white text-sm rounded" title="Settings">
                                <i class="fas fa-gear"></i>
                            </button>
                            <button id="logout-button" class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-sm rounded">Logout</button>
                        </div>
                    </div>
                    <div id="chat-window" class="flex-1 p-4 overflow-y-auto relative">
                        <ul id="message-container" class="list-none space-y-2"></ul>
                        <button id="scroll-to-bottom" class="hidden fixed bottom-24 right-96 bg-violet-500 hover:bg-violet-600 text-white rounded-full w-12 h-12 shadow-lg flex items-center justify-center transition-all z-10" title="Scroll to bottom">
                            <i class="fas fa-arrow-down"></i>
                        </button>
                    </div>
                    <div class="p-4 bg-white border-t">
                        <div id="typing-indicator" class="text-gray-500 text-sm mb-2"></div>
                        <form id="message-form" class="flex gap-2">
                            <button type="button" id="upload-button" class="px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded" title="Upload File">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <button type="button" id="search-button" class="px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded" title="Search Messages">
                                <i class="fas fa-search"></i>
                            </button>
                            <input type="text" id="message-input" class="flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Type a message..." required autocomplete="off">
                            <button class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold" type="submit">
                                <i class="fas fa-paper-plane mr-1"></i> Send
                            </button>
                        </form>
                        <input type="file" id="file-input" style="display: none;" accept="image/*,application/pdf,.doc,.docx,.txt,video/mp4,video/webm">
                    </div>
                </div>
            </div>

            <div class="w-1/5 flex flex-col">
                <div class="bg-white rounded-lg shadow flex flex-col h-full">
                    <div class="px-4 py-3 font-bold border-b chat-header">Members</div>
                    <div class="px-3 py-2 border-b">
                        <input type="text" id="member-search" class="w-full px-3 py-1.5 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="Search members...">
                    </div>
                    <div class="flex-1 overflow-y-auto">
                        <ul id="online-users-list" class="divide-y"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="privateMessageModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 600px;">
            <!-- User Profile Header -->
            <div class="bg-gradient-to-r from-violet-500 via-magenta-500 to-cyan-500 p-6 rounded-t-lg -mx-6 -mt-6 mb-4">
                <div class="flex justify-between items-start">
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <img id="pm-user-avatar" src="" alt="Avatar" class="w-16 h-16 rounded-full border-4 border-white shadow-lg object-cover">
                            <div id="pm-user-status-indicator" class="absolute bottom-0 right-0 w-5 h-5 bg-green-500 rounded-full border-2 border-white"></div>
                        </div>
                        <div class="text-white">
                            <h5 class="text-2xl font-bold" id="pm-recipient-name"></h5>
                            <p class="text-sm opacity-90" id="pm-user-status">Online</p>
                            <p class="text-xs opacity-75 mt-1" id="pm-user-bio">Loading...</p>
                        </div>
                    </div>
                    <button class="close-pm-modal text-white hover:bg-white hover:bg-opacity-20 rounded-full w-8 h-8 flex items-center justify-center transition">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex gap-2 mb-4">
                <button id="pm-block-btn" class="flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded font-semibold transition flex items-center justify-center gap-2">
                    <i class="fas fa-ban"></i>
                    <span id="pm-block-btn-text">Block User</span>
                </button>
                <button class="close-pm-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">
                    Close
                </button>
            </div>
            
            <!-- Messages Container -->
            <div id="pm-messages-container" class="h-[400px] overflow-y-auto mb-4 bg-gray-50 rounded-lg p-4 border border-gray-200">
                <p class="text-gray-500 text-center">Loading messages...</p>
            </div>
            
            <!-- Message Input -->
            <div class="flex gap-2">
                <input type="text" id="pm-input" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="Type your message...">
                <button class="px-6 py-3 btn-brand-gradient text-white rounded-lg font-semibold hover:shadow-lg transition" id="pm-send-btn">
                    <i class="fas fa-paper-plane mr-2"></i>Send
                </button>
            </div>
        </div>
    </div>
    
    <div id="createRoomModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Create New Room</h5>
                <button class="close-create-room-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mb-4">
                <label for="room-name-input" class="block text-sm font-medium text-gray-700 mb-1">Room Name</label>
                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" id="room-name-input" placeholder="Enter room name (e.g., gaming)" maxlength="30">
                <p class="text-xs text-gray-500 mt-1">Room name will automatically start with #</p>
            </div>
            <div id="create-room-message" class="text-sm mb-3 hidden"></div>
            <div class="flex gap-2 justify-end">
                <button type="button" class="close-create-room-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">Cancel</button>
                <button type="button" class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold" id="create-room-confirm-btn">Create</button>
            </div>
        </div>
    </div>
    
    <div id="searchModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Search Messages</h5>
                <button class="close-search-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mb-4">
                <input type="text" id="search-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Search messages...">
            </div>
            <div id="search-results" class="max-h-[400px] overflow-y-auto">
                <p class="text-gray-500 text-center py-4">Enter a search term to find messages</p>
            </div>
        </div>
    </div>

    <div id="announcementsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="bg-gradient-to-r from-magenta-500 to-violet-500 p-6 rounded-t-lg -mx-6 -mt-6 mb-4">
                <div class="flex justify-between items-center">
                    <h5 class="text-2xl font-bold text-white">
                        <i class="fas fa-bullhorn mr-2"></i>Announcements
                    </h5>
                    <button class="close-announcements-modal text-white hover:bg-white hover:bg-opacity-20 rounded-full w-8 h-8 flex items-center justify-center transition">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="announcements-container" class="max-h-[500px] overflow-y-auto space-y-4">
                <p class="text-gray-500 text-center py-4">Loading announcements...</p>
            </div>
        </div>
    </div>
    
    <div id="notificationsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">
                    <i class="fas fa-bell text-yellow-500"></i> Notifications
                </h5>
                <div class="flex items-center gap-2">
                    <button id="mark-all-read-btn" class="px-3 py-1.5 bg-cyan-500 hover:bg-cyan-600 text-white text-sm rounded font-semibold transition" title="Mark all as read">
                        <i class="fas fa-check-double mr-1"></i>Mark All Read
                    </button>
                    <button class="close-notifications-modal text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div id="notifications-container" class="max-h-[500px] overflow-y-auto space-y-2">
                <p class="text-gray-500 text-center py-4">Loading notifications...</p>
            </div>
        </div>
    </div>

    <!-- Server Settings Modal -->
    <div id="serverSettingsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 800px; max-height: 90vh;">
            <div class="bg-gradient-to-r from-violet-500 via-magenta-500 to-cyan-500 p-6 rounded-t-lg -mx-6 -mt-6 mb-4">
                <div class="flex justify-between items-center">
                    <h5 class="text-2xl font-bold text-white">
                        <i class="fas fa-cog mr-2"></i>Server Settings
                    </h5>
                    <button class="close-server-settings-modal text-white hover:bg-white hover:bg-opacity-20 rounded-full w-8 h-8 flex items-center justify-center transition">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div class="flex gap-4 h-[600px]">
                <!-- Sidebar -->
                <div class="w-48 border-r pr-4">
                    <button class="settings-tab-btn w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition active" data-tab="overview">
                        <i class="fas fa-info-circle mr-2"></i>Overview
                    </button>
                    <button class="settings-tab-btn w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition" data-tab="roles">
                        <i class="fas fa-shield-alt mr-2"></i>Roles
                    </button>
                    <button class="settings-tab-btn w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition" data-tab="members">
                        <i class="fas fa-users mr-2"></i>Members
                    </button>
                    <button class="settings-tab-btn w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition" data-tab="channels">
                        <i class="fas fa-hashtag mr-2"></i>Channels
                    </button>
                    <button class="settings-tab-btn w-full text-left px-4 py-2 rounded hover:bg-gray-100 transition" data-tab="invites">
                        <i class="fas fa-user-plus mr-2"></i>Invites
                    </button>
                </div>
                
                <!-- Content -->
                <div class="flex-1 overflow-y-auto">
                    <!-- Overview Tab -->
                    <div id="settings-tab-overview" class="settings-tab-content">
                        <h3 class="text-xl font-bold mb-4">Server Overview</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Server Name</label>
                                <input type="text" id="server-name-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" value="Vybez Community">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                                <textarea id="server-description-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" rows="3">Welcome to Vybez Community!</textarea>
                            </div>
                            <button class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold">Save Changes</button>
                        </div>
                    </div>
                    
                    <!-- Roles Tab -->
                    <div id="settings-tab-roles" class="settings-tab-content hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">Roles</h3>
                            <button id="create-role-btn" class="px-3 py-1.5 bg-violet-600 hover:bg-violet-700 text-white rounded text-sm">
                                <i class="fas fa-plus mr-1"></i>Create Role
                            </button>
                        </div>
                        <div id="roles-list" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">Loading roles...</p>
                        </div>
                    </div>
                    
                    <!-- Members Tab -->
                    <div id="settings-tab-members" class="settings-tab-content hidden">
                        <h3 class="text-xl font-bold mb-4">Server Members</h3>
                        <div id="server-members-list" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">Loading members...</p>
                        </div>
                    </div>
                    
                    <!-- Channels Tab -->
                    <div id="settings-tab-channels" class="settings-tab-content hidden">
                        <h3 class="text-xl font-bold mb-4">Channels</h3>
                        <div id="server-channels-list" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">Loading channels...</p>
                        </div>
                    </div>
                    
                    <!-- Invites Tab -->
                    <div id="settings-tab-invites" class="settings-tab-content hidden">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">Server Invites</h3>
                            <button id="create-invite-btn" class="px-3 py-1.5 bg-violet-600 hover:bg-violet-700 text-white rounded text-sm">
                                <i class="fas fa-plus mr-1"></i>Create Invite
                            </button>
                        </div>
                        <div id="server-invites-list" class="space-y-2">
                            <p class="text-gray-500 text-center py-4">Loading invites...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Server Modal -->
    <div id="createServerModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Create Your Server</h5>
                <button class="close-create-server-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label for="server-name-input-create" class="block text-sm font-medium text-gray-700 mb-1">Server Name</label>
                    <input type="text" id="server-name-input-create" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="My Awesome Server" maxlength="50">
                    <p class="text-xs text-gray-500 mt-1">This is what your server will be called</p>
                </div>
                <div>
                    <label for="server-description-input-create" class="block text-sm font-medium text-gray-700 mb-1">Description (Optional)</label>
                    <textarea id="server-description-input-create" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="What's your server about?" maxlength="200"></textarea>
                </div>
            </div>
            <div id="create-server-message" class="text-sm mb-3 mt-4 hidden"></div>
            <div class="flex gap-2 justify-end mt-6">
                <button type="button" class="close-create-server-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">Cancel</button>
                <button type="button" id="create-server-confirm-btn" class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold">Create Server</button>
            </div>
        </div>
    </div>

    <!-- Create Channel Modal -->
    <div id="createChannelModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Create Channel</h5>
                <button class="close-create-channel-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Channel Type</label>
                    <select id="channel-type-select" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500">
                        <option value="text">
                            <i class="fas fa-hashtag"></i> Text Channel
                        </option>
                        <option value="voice">
                            <i class="fas fa-volume-up"></i> Voice Channel (Coming Soon)
                        </option>
                        <option value="announcement">
                            <i class="fas fa-bullhorn"></i> Announcement Channel
                        </option>
                    </select>
                </div>
                <div>
                    <label for="channel-name-input" class="block text-sm font-medium text-gray-700 mb-1">Channel Name</label>
                    <input type="text" id="channel-name-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="new-channel" maxlength="30">
                    <p class="text-xs text-gray-500 mt-1">Use lowercase and hyphens (no spaces)</p>
                </div>
                <div>
                    <label for="channel-topic-input" class="block text-sm font-medium text-gray-700 mb-1">Topic (Optional)</label>
                    <input type="text" id="channel-topic-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="What's this channel about?" maxlength="100">
                </div>
            </div>
            <div id="create-channel-message" class="text-sm mb-3 mt-4 hidden"></div>
            <div class="flex gap-2 justify-end mt-6">
                <button type="button" class="close-create-channel-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">Cancel</button>
                <button type="button" id="create-channel-confirm-btn" class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold">Create Channel</button>
            </div>
        </div>
    </div>

    <!-- Manage Member Roles Modal -->
    <div id="manageMemberRolesModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Manage Roles for <span id="manage-member-username"></span></h5>
                <button class="close-manage-roles-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-2" id="member-roles-list">
                <p class="text-gray-500 text-center py-4">Loading roles...</p>
            </div>
            <input type="hidden" id="manage-member-username-hidden">
            <div class="flex gap-2 justify-end mt-6">
                <button type="button" class="close-manage-roles-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Role Modal -->
    <div id="editRoleModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
            <div class="flex justify-between items-center mb-4">
                <h5 class="text-lg font-semibold">Edit Role</h5>
                <button class="close-edit-role-modal text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label for="role-name-input" class="block text-sm font-medium text-gray-700 mb-1">Role Name</label>
                    <input type="text" id="role-name-input" class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-violet-500" placeholder="Role Name" maxlength="50">
                </div>
                <div>
                    <label for="role-color-input" class="block text-sm font-medium text-gray-700 mb-1">Role Color</label>
                    <input type="color" id="role-color-input" class="w-20 h-10 border border-gray-300 rounded cursor-pointer">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Permissions</label>
                    <div class="grid grid-cols-2 gap-2" id="role-permissions-grid">
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="VIEW_CHANNELS">
                            <span>View Channels</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="SEND_MESSAGES">
                            <span>Send Messages</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="READ_MESSAGE_HISTORY">
                            <span>Read Message History</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="MANAGE_CHANNELS">
                            <span>Manage Channels</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="MANAGE_ROLES">
                            <span>Manage Roles</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="MANAGE_MESSAGES">
                            <span>Manage Messages</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="KICK_MEMBERS">
                            <span>Kick Members</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="BAN_MEMBERS">
                            <span>Ban Members</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="INVITE_MEMBERS">
                            <span>Create Invites</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="MENTION_EVERYONE">
                            <span>Mention @everyone</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="UPLOAD_FILES">
                            <span>Upload Files</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="ADD_REACTIONS">
                            <span>Add Reactions</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="MANAGE_SERVER">
                            <span>Manage Server</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="VIEW_AUDIT_LOG">
                            <span>View Audit Log</span>
                        </label>
                        <label class="flex items-center gap-2 text-sm">
                            <input type="checkbox" class="role-permission-checkbox" data-permission="ADMINISTRATOR">
                            <span>Administrator</span>
                        </label>
                    </div>
                </div>
            </div>
            <input type="hidden" id="edit-role-id">
            <div class="flex gap-2 justify-end mt-6">
                <button type="button" class="close-edit-role-modal px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded">Cancel</button>
                <button type="button" id="save-role-btn" class="px-4 py-2 btn-brand-gradient text-white rounded font-semibold">Save Changes</button>
            </div>
        </div>
    </div>
    
    <script>
        // Load title bar for Electron app
        if (window.electronAPI) {
            fetch('/title-bar.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('title-bar-container').innerHTML = html;
                })
                .catch(err => console.error('Failed to load title bar:', err));
        }
    </script>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="desktop-integration.js"></script>
    <script src="client.js"></script>
    <script src="discord-ui.js"></script>
    <script src="store-compliance.js"></script>
    <script>
        window.openModal = function(id) {
            document.getElementById(id).style.display = 'flex';
        };
        window.closeModal = function(id) {
            document.getElementById(id).style.display = 'none';
        };
    </script>
</body>
</html>
